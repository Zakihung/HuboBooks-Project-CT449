var itemList = {
    "sp01": {
        "name": "Nhật ký trong tù",
        "price": 40000,
        "photo": "images/Nhat_ky_trong_tu.png"
    },
    "sp02": {
        "name": "Hong tay khói lạnh",
        "price": 90000,
        "photo": "images/Hong_tay_khoi_lanh.jpg"
    },
    "sp03": {
        "name": "Gió lạnh đầu mùa",
        "price": 50000,
        "photo": "images/Gio_lanh_dau_mua.jpg"
    },
    "sp04": {
        "name": "Lão Hạc",
        "price": 30000,
        "photo": "images/Lao_Hac.jpg"
    },
    "sp05": {
        "name": "Chí Phèo",
        "price": 20000,
        "photo": "images/Chi_Pheo.jpg"
    },
    "sp06": {
        "name": "Tắt đèn",
        "price": 50000,
        "photo": "images/Tat_den.jpg"
    },
    "sp07": {
        "name": "Truyện Kiều",
        "price": 60000,
        "photo": "images/Truyen_Kieu.jpg"
    },
    "sp08": {
        "name": "Đời thừa",
        "price": 50000,
        "photo": "images/Doi_thua.jpg"
    },
    "sp09": {
        "name": "Đất rừng phương nam",
        "price": 40000,
        "photo": "images/Dat_rung_phuong_nam.jpg"
    },
    "sp10": {
        "name": "Dế mèn phiêu lưu ký",
        "price": 120000,
        "photo": "images/De_men_phieu_luu_ky.jpg"
    },
    "sp11": {
        "name": "Vỡ đê",
        "price": 80000,
        "photo": "images/Vo_de.jpg"
    },
    "sp12": {
        "name": "Lá ngọc cành vàng",
        "price": 30000,
        "photo": "images/La_ngoc_canh_vang.jpg"
    },
    "sp13": {
        "name": "Truyện Tây Bắc",
        "price": 60000,
        "photo": "images/Truyen_Tay_Bac.jpg"
    },
    "sp14": {
        "name": "Đây Thôn Vĩ Dạ",
        "price": 70000,
        "photo": "images/Day_thon_Vi_Da.jpg"
    },
    "sp15": {
        "name": "Chiếc lược ngà",
        "price": 40000,
        "photo": "images/Chiec_luoc_nga.jpg"
    },
    "sp16": {
        "name": "Tôi thấy hoa vàng trên cỏ xanh",
        "price": 70000,
        "photo": "images/Toi_thay_hoa_vang_tren_co_xanh.jpg"
    },
    "sp17": {
        "name": "Kafka bên bờ biển",
        "price": 130000,
        "photo": "images/Kafka_ben_bo_bien.png"
    },
    "sp18": {
        "name": "Bác Sĩ Zhivago",
        "price": 140000,
        "photo": "images/Bac_si_Zhivago.png"
    },
    "sp19": {
        "name": "Harrt Potter trọn bộ",
        "price": 1120000,
        "photo": "images/Harry_Potter.png"
    },
    "sp20": {
        "name": "Những Cuộc Phiêu Lưu Của Huckleberry Finn",
        "price": 90000,
        "photo": "images/Nhung_cuoc_phieu_luu_cua_Huckleberry.png"
    },
    "sp21": {
        "name": "Không Gia Đình",
        "price": 120000,
        "photo": "images/Khong_gia_dinh.png"
    },
    "sp22": {
        "name": "Nỗi Đau Của Chàng Werther",
        "price": 90000,
        "photo": "images/Noi_dau_cua_chang_Werther.png"
    },
    "sp23": {
        "name": "Nhà Thờ Đức Bà Paris",
        "price": 130000,
        "photo": "images/Nha_tho_duc_ba_Paris.png"
    },
    "sp24": {
        "name": "Bá Tước Monte Cristo",
        "price": 210000,
        "photo": "images/Ba_tuoc_Monte_Cristo.png"
    },
    "sp25": {
        "name": "Don Quixote",
        "price": 85000,
        "photo": "images/Don_Quixote.jpg"
    },
    "sp26": {
        "name": "Nhà giả kim",
        "price": 56000,
        "photo": "images/Nha_gia_kim.jpg"
    },
    "sp27": {
        "name": "Ba gã cùng thuyền",
        "price": 86000,
        "photo": "images/Ba_ga_cung_thuyen.jpg"
    },

    "sp28": {
        "name": "Ông già và biển cả",
        "price": 90000,
        "photo": "images/Ong_gia_va_bien_ca.jpg"
    },

    "sp29": {
        "name": "Trăm năm cô đơn",
        "price": 130000,
        "photo": "images/Tram_nam_co_don.jpg"
    },
    "sp30": {
        "name": "Kẻ trộm sách",
        "price": 180000,
        "photo": "images/Ke_trom_sach.jpg"
    },
    "sp31": {
        "name": "Đồi gió hú",
        "price": 80000,
        "photo": "images/Doi_gio_hu.jpg"
    },
    "sp32": {
        "name": "Tư Tưởng Hồ Chí Minh",
        "price": 100000,
        "photo": "images/Giao_trinh_tu_tuong_hcm.jpg"
    },
    "sp33": {
        "name": "Chủ nghĩa xã hội khoa học",
        "price": 58000,
        "photo": "images/Chu_nghia_xa_hoi_khoa_hoc.jpg"
    },


    "sp34": {
        "name": "Kinh Tế Chính Trị Mác-Lênin ",
        "price": 63000,
        "photo": "images/Kinh_te_chinh_tri.jpg"
    },

    "sp35": {
        "name": "Triết học Mác-Lênin",
        "price": 100000,
        "photo": "images/Triet_hoc_MacLenin.jpg"
    },

    "sp36": {
        "name": "Lịch sử Đảng Cộng sản Việt Nam",
        "price": 60000,
        "photo": "images/Lich_su_Dang.jpg"
    },
    "sp37": {
        "name": "Pháp luật đại cương",
        "price": 50000,
        "photo": "images/Phap_luat_dai_cuong.jpg"
    },
    "sp38": {
        "name": "Bộ sách giáo khoa lớp 1",
        "price": 186000,
        "photo": "images/SGK_cap1.jpg"
    },
    "sp39": {
        "name": "Bộ sách giáo khoa lớp 2",
        "price": 187000,
        "photo": "images/SGK_lop2.jpg"
    },
    "sp40": {
        "name": "Atlat địa lý",
        "price": 30000,
        "photo": "images/Atlat_dia_ly.jpg"
    },

    "sp41": {
        "name": "Sách giáo khoa toán lớp 1",
        "price": 1000000,
        "photo": "images/SGK_toan_lop1_cu.jpg"
    },
};

// Thêm vào giỏ hàng
window.onstorage = () => {
    showCart();
};
var A = 0;
var table = '<table style="margin:10px; width: 97.5%;" id="tablecart">' +
    '<thead>' +
    '<tr>' +
    '<th>Hình SP</th>' +
    '<th>Tên SP</th>' +
    '<th>Số Lượng</th>' +
    '<th>Giá</th>' +
    '<th>Thành Tiền</th>' +
    '<th> </th></tr>' +
    '</thead>' +
    '<tbody id="cartDetail" >' +
    '<tr>' +
    '</tr>' +
    '</tbody>' +
    '<tfoot>' +
    '<tr>' +
    '<td colspan="6" style="text-align:right;">Thành tiền = <span id="AA"></span></td>' +
    '</tr>' +
    '<tr>' +
    '<td colspan="6" style="text-align:center;"> <button style="text-align:center; width: 160px; height: 38px; " id="thanhtien" onclick="tong()"; type="submit" class="btn btn-outline-success">Thanh toán</button></td>' +
    '</tr>'
'</tfoot>' +
'</table><br>';
document.getElementById('database').innerHTML = table;

function showCart() {
    var A = 0;

    if (localStorage.length != 0) {
        for (var key in localStorage) {
            var item = itemList[key];
            var photo = item.photo;
            var name = item.name;
            var price = Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(item.price);
            var number = localStorage.getItem(key);
            var temp = item.price * number;
            var thanhtien = Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(item.price * number);

            A = A + temp;
            document.getElementById('AA').innerHTML = Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(A);
            var tbody =
                '<tr >' +
                '<td>' + '<img src=' + photo + '></td>' +
                '<td >' + name + '</td>' +
                '<td style="text-align:center">' + number + '</td>' +
                '<td style="text-align:center">' + price + '</td>' +
                '<td style="text-align:center">' + thanhtien + '</td>' +
                '<td style="text-align:center" ></i><a data-code="' + key +
                '"><button onclick="removeCart(\'' + key + '\')" style=" background-color: #27ae60; padding:8px;"><i class="fa fa-trash" style="font-size:25px; color: #fff" ></></a></td>' +
                '</tr>';

            document.getElementById("tablecart").insertRow(1).innerHTML = tbody;
        };
    }

}

function getDiscountRate() {
    var d = new Date();
    var weekday = d.getDay();
    var totalMins = d.getHours() * 60 + d.getMinutes();
    if (weekday >= 1 && weekday <= 3 && ((totalMins >= 420 && totalMins <= 660) || (totalMins >= 780 && totalMins <= 1020)))
        return 0.1;
    return 0;
}

function removeCart(code) {
    if (typeof window.localStorage[code] !== "undefined") {
        window.localStorage.removeItem(code);
        location.reload();
    }
}

function tong(frm) {
    alert("Thanh toán thành công")
    return frm.checkValidity();
}